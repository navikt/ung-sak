image: "repo.adeo.no:5443/k9sak"
team: k9saksbehandling
replicas:
  min: 4
  max: 6
  cpuThresholdPercentage: 80
port: 8080
# TODO (u139158): PFP-506 Fikse healthchecks skikkelig, inkl preStopHookPath og prometheus
healthcheck:
  liveness:
    path: /fpsak/internal/health/isAlive
    initialDelay: 30
    timeout: 5
    periodSeconds: 10
    failureThreshold: 27
  readiness:
    path: /fpsak/internal/health/isReady
    initialDelay: 30
    timeout: 5
    periodSeconds: 10
    failureThreshold: 27
#preStopHookPath: /fpfordel/internal/preStop
resources:
  limits:
    cpu: 4 # == 4 cpuer
    memory: "3072Mi"
  requests:
    cpu: 0.5 # == 0,5 cpu
    memory: "2048Mi"
ingress:
  enabled: true
prometheus:
  enabled: true
  path: /fpsak/internal/metrics/prometheus
fasitResources:
  used:
  # Applikasjonskonfigurasjon
  - alias: srvengangsstonad
    resourceType: credential
    propertyMap:
      username: SYSTEMBRUKER_USERNAME
      password: SYSTEMBRUKER_PASSWORD
  - alias: loadbalancer:fpsak
    resourceType: loadbalancerconfig
    propertyMap:
      url: LOADBALANCER_FQDN
  - alias: defaultDS
    resourceType: datasource
  - alias: dvhDS
    resourceType: datasource

  # Sikkerhet - authn, authz og token exchange
  - alias: fpsak-oidc
    resourceType: OpenIdConnect
    propertyMap:
      agentName: oidc_OpenAM.agentName
      password: oidc_OpenAM.password
      hostUrl: oidc_OpenAM.hostUrl
      issuerUrl: oidc_OpenAM.issuerUrl
      jwksUrl: oidc_OpenAM.jwksUrl
  - alias: security-token-service-issuer
    resourceType: baseUrl
    propertyMap:
      url: oidc_sts.issuer.url
  - alias: security-token-service-jwks
    resourceType: restservice
    propertyMap:
      url: oidc_sts.jwks.url
  - alias: abac.pdp.endpoint
    resourceType: restservice
  - alias: securityTokenService
    resourceType: baseUrl

  - alias: appdynamics
    resourceType: ApplicationProperties

  # Integrasjoner
  - alias: ldap
    resourceType: ldap
  - alias: fplos.kafka.behandling
    resourceType: ApplicationProperties
  - alias: fpsak.dokumentbestilling.kafka
    resourceType: ApplicationProperties
  - alias: fpsak.historikkinnslag.kafka
    resourceType: ApplicationProperties
  - alias: fpsak.kontroll.resultat.kafka
    resourceType: ApplicationProperties
  - alias: kafka-brokers
    resourceType: baseUrl
    propertyMap:
      url: BOOTSTRAP_SERVERS
  - alias: fp-tilkjentytelse-v1-topic
    resourceType: baseUrl
  - alias: fprisk.kafka.utfor
    resourceType: ApplicationProperties

  # REST
  - alias: fpoppdrag_simuleringresultat
    resourceType: restservice
  - alias: infotrygd.hendelser.api
    resourceType: restservice
  - alias: fprisk_risikoklassifisering_hent
    resourceType: restservice
  - alias: fpformidling.forhaandsvisbrev
    resourceType: restservice
  - alias: fpformidling.bestillbrev
    resourceType: restservice
  - alias: fpformidling.hentbrevmaler
    resourceType: restservice
  - alias: fpformidling.erdokumentprodusert
    resourceType: restservice
  - alias: fpformidling.lagresaksbehandlertekst
    resourceType: restservice
  - alias: fpformidling.hentsaksbehandlertekst
    resourceType: restservice
  - alias: fpabakus
    resourceType: restservice

  # Web Services
    # Nødvendig for å få snakket med WS'er som kun støtter LTPA
  - alias: serviceGateway
    resourceType: Webservicegateway

  - alias: Aktoer_v2
    resourceType: webserviceendpoint
    propertyMap:
      endpointUrl: AKTOER_V2_URL
  - alias: Journal_v3
    resourceType: webserviceendpoint
    propertyMap:
      endpointUrl: JOURNAL_V3_URL
  - alias: InngaaendeJournal_v1
    resourceType: webserviceendpoint
    propertyMap:
      endpointUrl: INNGAAENDEJOURNAL_V1_URL
  - alias: virksomhet:Arbeidsfordeling_v1
    resourceType: webserviceendpoint
    propertyMap:
      endpointUrl: ARBEIDSFORDELING_V1_URL
  - alias: virksomhet:Sak_v1
    resourceType: webserviceendpoint
    propertyMap:
      endpointUrl: SAK_V1_URL
  - alias: VIRKSOMHET:BEHANDLEOPPGAVE_V1
    resourceType: webserviceendpoint
    propertyMap:
      endpointUrl: BEHANDLEOPPGAVE_V1_URL
  - alias: virksomhet:Person_v3
    resourceType: webserviceendpoint
    propertyMap:
      endpointUrl: PERSON_V3_URL
  - alias: virksomhet:Organisasjon_v4
    resourceType: webserviceendpoint
    propertyMap:
      endpointUrl: ORGANISASJON_V4_URL
  - alias: BehandleInngaaendeJournal_v1
    resourceType: webserviceendpoint
    propertyMap:
      endpointUrl: BEHANDLEINNGAAENDEJOURNAL_V1_URL
  - alias: virksomhet:BehandleSak_v2
    resourceType: webserviceendpoint
    propertyMap:
      endpointUrl: BEHANDLESAK_V2_URL
  - alias: virksomhet:Inntekt_v3
    resourceType: webserviceendpoint
    propertyMap:
      endpointUrl: INNTEKT_V3_URL
  - alias: virksomhet:Medlemskap_v2
    resourceType: webserviceendpoint
    propertyMap:
      endpointUrl: MEDLEM_V2_URL
  - alias: virksomhet:Oppgave_v3
    resourceType: webserviceendpoint
    propertyMap:
      endpointUrl: OPPGAVE_V3_URL
  
  